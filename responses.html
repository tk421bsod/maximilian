<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maximilian Web Interface (WIP)</title>
    <link rel="stylesheet" href="common.css">
    <script src="common.js"></script>
</head>
<body>
<h1>This is the web interface for Maximilian.</h1>
<p>For now, you don't need to log in with your Discord account, and you can only create custom responses.</p>
<p>Remember, this is a <b>WIP</b>, or <b>W</b>ork <b>I</b>n <b>P</b>rogress, and it may be broken. If you find bugs, please let the developer know by <a href="mailto:xtk421bsodx@gmail.com">emailing</a> them.</p>
<br>
<br>
<p id="error"></p>
<br>
<br>
<input type="text" id="guild_id" name="guild_id" placeholder="Enter the ID of the server you want to create the custom response for.">
<br>
<br>
<input type="text" id="response_trigger" name="response_trigger" placeholder="Enter what will trigger the response.">
<br>
<br>
<input type="text" id="response_text" name="response_text" placeholder="Enter the text that the bot should send.">
<br>
<br>
<button id="saveresponse" onclick=save();>Save Response</button>
<br>
<p id="savingresponse"></p>
<script>
//gets url parameters, second argument is default value
var sourceofredirect = getUrlParam('redirectsource','noredirect');
var saveresponseState = getUrlParam('responsesaved', '' );
var errormessage = getUrlParam('error', '')
if (sourceofredirect == "saveresponse") {
    //depending on the result, show a different message
    if (saveresponseState == "successful"){document.getElementById("savingresponse").innerHTML="Your custom response was saved successfully. Try testing it!";} 
    if (saveresponseState == "error-duplicate"){document.getElementById("error").innerHTML="Your custom response already exists. Try making a new one!";}
    //if the guild id is invalid
    if (saveresponseState == "error-guildid-invalid"){        
        document.getElementById("error").innerHTML = "It looks like the server ID isn't valid. Make sure you entered everything in the correct fields, and check the server ID for typos. Remember, the server ID is not the server's name.";
        document.getElementById("guild_id").style.transition = "0.0s";
        document.getElementById("guild_id").style.webkitTransition = "0.0s";
        document.getElementById("guild_id").style.border = "10px solid red";
        document.getElementById("guild_id").focus;}
    //if there's a different error
    if (saveresponseState="error-other"){
        if(errormessage != ""){
            document.getElementById("error").innerHTML = "There was an error while saving changes. Please try again later.";
            document.getElementById("saving").innerHTML="";
            console.error(error)
           
            buttonclicked = 0;
            document.getElementById("technicalinfobutton").innerHTML = "Click to show technical info";
            document.getElementById("technicalinfobutton").style.opacity = "1";
            document.getElementById("technicalinfo").innerHTML = "Error: " + error.message + ". This error was server-side, and it occured in " + getUrlParam('errorlocation', '') + '.';
        }
    }
}
</script>
<br>
<footer>Made with ♥️ by TK421bsod</footer>    
</body>
</html>